{% extends 'base.html' %}

{% block content %}

<div class="navigation-button fixed">
{% if previous_uitspraak %}
  <a class="btn btn-primary" href="/uitspraken/{{ previous_uitspraak.id }}">Previous</a>
{% endif %}
{% if next_uitspraak %}
  <a class="btn btn-primary" href="/uitspraken/{{ next_uitspraak.id }}">Next</a>
{% endif %}
</div>
<div class="row">
    <div class="col-md-6">
        <h1 class="d-inline">{{ uitspraak.titel }}</h1>
    </div>
    <div class="col-md-6 text-right">
        <div class="dropdown">
            <select id="label-dropdown" class="btn btn-primary">
                {% for value, label in uitspraak.label_choices %}
                    <option value="{{ value }}" {% if value == uitspraak.label %}selected{% endif %}>{{ label }}</option>
                {% endfor %}
            </select>
        </div>
    </div>
</div>
<div class="alert alert-info">
    <strong>Oordeel:</strong> {{ uitspraak.oordeel }}
    <br>
    {{ uitspraak.uitleg }}
    <p>
        <i>
            <ol start="0">
                <li>geen oordeel beschikbaar</li>
                <li>het beroep wordt gegrond verklaard. Het bestreden besluit wordt geheel of gedeeltelijk vernietigd</li>
                <li>het beroep wordt niet-ontvankelijk verklaard.</li>
                <li>
                    De bestuursrechter kan bepalen dat:
                    <ol style="list-style-type: lower-alpha;">
                        <li>de rechtsgevolgen van het vernietigde besluit of het vernietigde gedeelte daarvan geheel of gedeeltelijk in stand blijven, of</li>
                        <li>zijn uitspraak in de plaats treedt van het vernietigde besluit of het vernietigde gedeelte daarvan.</li>
                    </ol>
                </li>
                <li>De bestuursrechter kan het bestuursorgaan opdragen een nieuw besluit te nemen of een andere handeling te verrichten met inachtneming van zijn aanwijzingen.</li>
                <li>De bestuursrechter kan zo nodig een voorlopige voorziening treffen. Daarbij bepaalt hij het tijdstip waarop de voorlopige voorziening vervalt.</li>
                <li>De bestuursrechter kan bepalen dat, indien of zolang het bestuursorgaan niet voldoet aan een uitspraak, het bestuursorgaan aan een door hem aangewezen partij een in de uitspraak vast te stellen dwangsom verbeurt.</li>
                <li>De bestuursrechter verklaart zich onbevoegd om uitspraak te doen.</li>
                <li>Anders</li>
            </ol>
        </i>
    </p>
</div>
<p>{{ uitspraak.samenvatting }}</p>
    <div class="label-list">
        {% for trefwoord in uitspraak.trefwoorden.all %}
            {% if trefwoord.type == "proceduresoort" %}
                <span class="badge badge-primary">{{ trefwoord.naam }} ({{ trefwoord.type }})</span>
            {% elif trefwoord.type == "rechtsgebied" %}
                <span class="badge badge-info">{{ trefwoord.naam }} ({{ trefwoord.type }})</span>
            {% endif %}
        {% endfor %}
        <span class="badge badge-success">{{ uitspraak.plaats }}</span>
        <span class="badge badge-warning">{{ uitspraak.provincie }}</span>
    </div>
<p>{{ uitspraak.ecli }}</p>
<p><a href="{{ uitspraak.link }}" target="_blank">Bekijk uitspraak op Raadvanstate.nl</a></p>
<p>{{ uitspraak.datum }}</p>
<p>{{ uitspraak.inhoud|linebreaksbr }}</p>

<div class="navigation-button fixed">
{% if previous_uitspraak %}
  <a class="btn btn-primary" href="/uitspraken/{{ previous_uitspraak.id }}">Previous</a>
{% endif %}
{% if next_uitspraak %}
  <a class="btn btn-primary" href="/uitspraken/{{ next_uitspraak.id }}">Next</a>
{% endif %}
</div>

<script>
    $(document).ready(function () {
        $('#label-dropdown').on('change', function () {
            var newLabel = $(this).val();
            var instanceId = {{ uitspraak.id }};

            $.ajax({
                type: 'POST',
                url: '/uitspraken/update-label/' + instanceId + '/',
                data: {
                    csrfmiddlewaretoken: '{{ csrf_token }}',
                    label: newLabel,
                },
                success: function () {
                    // Update the view without refreshing the page
                    $('#label-dropdown option:selected').prop('selected', false);
                    $('#label-dropdown option[value="' + newLabel + '"]').prop('selected', true);
                }
            });
        });
    });
</script>

{% endblock %}

<style>
    .label-list span {
      display: inline-block;
      margin-right: 5px;
      margin-bottom: 5px;
    }
</style>